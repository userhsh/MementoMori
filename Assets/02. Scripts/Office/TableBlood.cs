using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class TableBlood : MonoBehaviour, IInteractable
{
    PaperNone paperNone = null; //티비 밑 획득용 빈종이
    PaperName paperName = null; //이름 적힐 종이
    Pencil pencil = null;
    SpriteRenderer nameElie = null; //이름
    bool isTrue = false;

    private void Awake()
    {
        paperName = GetComponentInChildren<PaperName>();
        nameElie = GetComponentInChildren<SpriteRenderer>();
        nameElie.enabled = false; //이름 먼저 가져와서 꺼둔 후에
        paperName.gameObject.SetActive(false);
    }

    private void OnTriggerEnter(Collider other)
    {

        paperNone = other.gameObject.GetComponent<PaperNone>();
        pencil = other.gameObject.GetComponent<Pencil>();

        if (paperNone != null)
        {
            Destroy(paperNone.gameObject); //빈 종이 삭제
            paperName.gameObject.SetActive(true); //이름 종이 출현

            if (paperName.enabled == true && pencil != null) //이름 종이 출현 상태에서 연필 대면
            {
                isTrue = true;
                Destroy(pencil.gameObject); //연필 삭제 후
                nameElie.enabled = true; //이름 출현

            }
        }


    }

    public void Interact()
    {
        throw new System.NotImplementedException();
    }

    public void Collection2Get()
    {
        if (isTrue)
        {
            GameObject.Find("PlayerUI").GetComponent<UIManager>().collections[1] = true;
        }
    }

}
